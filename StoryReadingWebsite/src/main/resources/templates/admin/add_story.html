<!DOCTYPE html>
<html lang="en" >

<head th:replace="fragmentsAdmin :: html_head"></head>

<body>
<nav th:replace="fragmentsAdmin :: html_menu"></nav>
    <div class="container-fluid">
        <form th:action="@{/admin/stories/save}" th:object="${story}" method="post"
              enctype="multipart/form-data">
            <input type="hidden" th:field="*{id}"/>
                <div>
                    <label class="form-label">Tên Truyện: </label>
                        <input type="text" th:field="*{title}" class="form-control" required>
                </div><br>
                <div>
                    <label class="form-label">Ảnh: </label>
                        <input  type="file" name="fileImage" id="fileImage" onchange="loadFile(event)" accept="image/*"/>
                    <img id="output" width="200" />
                </div><br>
                <div>
                    <label class="form-label">Tác giả: </label>
                        <input type="text" th:field="*{author}" class="form-control" required>
                </div><br>
            <div>
                <label class="form-label">Nguồn: </label>
                <input type="text" th:field="*{link}" class="form-control" required>
            </div><br>
                <div>
                    <label for="description" class="form-label">Nội dung truyện: </label>
                    <textarea class="form-control" th:field="*{description}" id="description" rows="10" cols="70"></textarea>
                </div><br>
                <div>
                <label class="form-label">Trạng thái: </label>
                <select class="form-control" id="status" th:field="*{status}">
                    <option
                            th:each=" status : ${T(vn.techmaster.storyreadingwebsite.entity.Status).values()}"
                            th:value="${status}" th:text="${status.label}">
                    </option>
                </select>
                </div><br>
                <div>
                    <label class="form-label">Thể loại: </label>
                       <th:block th:each="category : ${listCategories}">
                        <div class="form-check">
                            <input type="checkbox" th:field="*{categories}" th:text="${category.name}"
                            th:value="${category.id}" class="form-check-input me-2"/>
                        </div>
                       </th:block>
                </div>
                <div class="p-3">
                    <button type="submit" class="btn btn-primary">Lưu Truyện</button>
                </div>
        </form>
    </div>
<footer th:replace="fragmentsAdmin :: html_footer"></footer>
<script>
    var loadFile = function(event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>
</body>

</html>